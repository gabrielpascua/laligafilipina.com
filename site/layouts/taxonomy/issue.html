{{- define "main" }}

{{ with (index .Site.Data.home .Data.Term) }}

    {{- with .hero -}}
        {{ .content | safeHTML }}
    {{- end -}}

<div class="mb-8 md:flex md:mt-8 max-w-screen-lg m-auto">

    {{- with .ticker -}}
    {{ $primaryUrl := urls.Parse .primary.url }}
    <div class="md:basis-2/4">
        <div class="container mx-auto pl-4 pr-4">
            <span class="text-xs min-w-[80px] bg-white relative top-9 left-4 pl-2 pr-2 text-zinc-700">In Trending</span>
        </div>
        <section class="bg-light mb-2">
            <div class="container pl-4 pr-4">
                <div class="border mt-6 pb-6 rounded">
                    <a href="{{ .primary.url }}" class="text-base p-6 block">
                        <h3 class="font-bold text-base text-gray-800 leading-5 mb-1 md:leading-6 capitalize">{{ .primary.title }}</h3>
                        <p class="leading-5 text-zinc-500 text-sm">{{ .primary.description | safeHTML }}</p>
                        <span class="text-xs text-zinc-500">{{ replace $primaryUrl.Host "www." "" }}</span>
                    </a>

                    <div class="rounded-md ml-6 mr-6 p-6 pt-5 bg-zinc-50">
                        {{- if (isset .primary "lead") }}
                        <span class="block text-xs font-semibold text-gray-800 mb-4 border-b pb-4 text-gray-800">
                            More on {{ .primary.lead }}
                        </span>
                        {{ end -}}


                        {{- range .secondary }}
                            {{ $secondaryUrl := urls.Parse .url }}
                            <a href="{{ .url }}" class="block text-sm decoration-gray-400 md:text-base mb-6 last:mb-0 mt-2">
                                <p class="leading-5">
                                    <strong class="font-bold capitalize text-gray-800 pb-2 block">{{ .title }}</strong>
                                    {{- if (isset . "description") }}
                                        <span class="text-sm text-zinc-500">{{ .description }}</span><br />
                                    {{ end -}}
                                    <span class="text-xs text-zinc-500">{{ replace $secondaryUrl.Host "www." ""}}</span>
                                </p>
                            </a>
                        {{ end -}}
                    </div>
                </div>
            </div>
        </section>
    </div>
    {{- end -}}

    {{- with .carousel -}}
    <div class="md:basis-2/4 mt-6">
        <div class="container pl-4 pr-4">
            {{- range . }}
            {{ $sourceUrl := urls.Parse .url }}
            <div class="container mx-auto pl-4 pr-4">
                <span class="text-xs min-w-[80px] bg-white relative top-3 left-0 pl-2 pr-2 text-zinc-500 md:text-zinc-700">In {{ .tag }}</span>
            </div>
            <div class="border rounded mb-0 pt-1">
                <a href="{{ .url }}" class="flex items-start mb-1 pb-4 pt-2 last:border-0 relative">
                    <div class="pt-2">
                        <h3 class="font-bold text-base text-gray-800 leading-5 mb-1 pl-6 pr-6 md:leading-6 capitalize">{{ .title }}</h3>
                        <p class="text-sm text-zinc-500 pl-6 pr-6">
                            {{ .description | safeHTML }}
                        </p>
                        <p class="text-neutral-600 pl-6 pr-6">
                            <span class="text-xs text-zinc-500 mt-2">{{ replace $sourceUrl.Host "www." "" }}</span>
                        </p>
                    </div>
                </a>
            </div>
            {{ end -}}
        </div>
    </div>
    {{- end -}}

{{- end -}}

</div>

{{- end -}}
